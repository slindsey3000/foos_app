<%# SEO Meta Tags for News Page %>
<% content_for :title, "USA Foosball News | Latest Tournament Updates & Community News" %>
<% content_for :description, "Stay updated with the latest USA Foosball news, tournament results, community updates, and competitive foosball events across America." %>
<% content_for :keywords, "foosball news, USA foosball news, foosball tournaments, foosball updates, competitive foosball news, foosball community" %>

<%# Structured Data for News Page %>
<% content_for :structured_data do %>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "USA Foosball News",
  "description": "Latest news, tournaments, and community updates from USA Foosball",
  "url": "<%= request.original_url %>",
  "mainEntity": {
    "@type": "ItemList",
    "name": "Foosball News Articles",
    "numberOfItems": "<%= @articles.count %>",
    "itemListElement": [
      <% @articles.first(5).each_with_index do |article, index| %>
      {
        "@type": "Article",
        "position": <%= index + 1 %>,
        "headline": "<%= j article.title %>",
        "url": "<%= request.base_url %>/news/<%= article.slug %>",
        "datePublished": "<%= article.published_at&.iso8601 %>"
      }<%= ',' unless index == [@articles.count - 1, 4].min %>
      <% end %>
    ]
  }
}
</script>
<% end %>

<div class="articles-page">
  <div class="container">
    <div class="page-header">
      <h1>USA Foosball News</h1>
      <p>Stay updated with the latest news, tournaments, and community updates</p>
    </div>

    <% if current_user&.admin? %>
      <div class="admin-actions">
        <%= link_to "Create New Article", new_article_path, class: "btn btn-primary" %>
      </div>
    <% end %>

    <div class="articles-grid">
      <% @articles.each do |article| %>
        <article class="article-card">
          <% if article.image_url.present? %>
            <div class="article-image">
              <%= image_tag article.image_url, alt: article.title %>
            </div>
          <% end %>
          
          <div class="article-content">
            <div class="article-meta">
              <span class="article-date"><%= article.published_at.strftime("%B %d, %Y") %></span>
              <% if article.featured? %>
                <span class="featured-badge">Featured</span>
              <% end %>
            </div>
            
            <h2 class="article-title">
              <%= link_to article.title, article_path(article.slug) %>
            </h2>
            
            <p class="article-excerpt">
              <%= truncate(strip_tags(article.content.to_s), length: 150) %>
            </p>
            
            <div class="article-footer">
              <span class="article-author">By <%= article.author %></span>
              <%= link_to "Read More", article_path(article.slug), class: "read-more-link" %>
            </div>
          </div>
        </article>
      <% end %>
    </div>

    <% if @articles.empty? %>
      <div class="empty-state">
        <h3>No articles yet</h3>
        <p>Check back soon for the latest USA Foosball news and updates!</p>
      </div>
    <% end %>
  </div>
</div>
