<div class="admin-users-page">
  <div class="container">
    <div class="page-header">
      <h1>User Management</h1>
      <p>Manage all users in the system</p>
    </div>

    <div class="admin-actions">
      <%= link_to "Create New User", new_admin_user_path, class: "btn btn-primary" %>
    </div>

    <div class="users-table-container">
      <table class="admin-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Username</th>
            <th>Email</th>
            <th>Roles</th>
            <th>Joined</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td>
                <div class="user-info">
                  <div>
                    <strong><%= user.fullname %></strong>
                    <% if user.about.present? %>
                      <p class="user-about"><%= truncate(user.about, length: 50) %></p>
                    <% end %>
                  </div>
                </div>
              </td>
              <td><%= user.username.present? ? user.username : "â€”" %></td>
              <td><%= user.email %></td>
              <td>
                <div class="user-roles">
                  <% if user.admin? %>
                    <span class="badge badge-admin">Admin</span>
                  <% end %>
                  <% if user.director? %>
                    <span class="badge badge-director">Director</span>
                    <% if user.director_title.present? %>
                      <span class="badge badge-director-title"><%= user.director_title %></span>
                    <% end %>
                  <% end %>
                  <% if user.world_cup_selection_committee? %>
                    <span class="badge badge-committee">Committee</span>
                  <% end %>
                </div>
              </td>
              <td><%= user.created_at.strftime("%b %d, %Y") %></td>
              <td>
                <div class="action-buttons">
                  <%= link_to "View", admin_user_path(user), class: "btn btn-sm btn-outline" %>
                  <%= link_to "Edit", edit_admin_user_path(user), class: "btn btn-sm btn-secondary" %>
                  <%= link_to "Delete", admin_user_path(user), 
                      method: :delete, 
                      data: { confirm: "Are you sure you want to delete this user?" }, 
                      class: "btn btn-sm btn-danger" %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
